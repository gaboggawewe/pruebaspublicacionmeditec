function H(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var L={exports:{}},M;function k(){if(M)return L.exports;M=1;function r(){}return r.prototype={on:function(t,e,s){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:s}),this},once:function(t,e,s){var i=this;function n(){i.off(t,n),e.apply(s,arguments)}return n._=e,this.on(t,n,s)},emit:function(t){var e=[].slice.call(arguments,1),s=((this.e||(this.e={}))[t]||[]).slice(),i=0,n=s.length;for(i;i<n;i++)s[i].fn.apply(s[i].ctx,e);return this},off:function(t,e){var s=this.e||(this.e={}),i=s[t],n=[];if(i&&e)for(var o=0,l=i.length;o<l;o++)i[o].fn!==e&&i[o].fn._!==e&&n.push(i[o]);return n.length?s[t]=n:delete s[t],this}},L.exports=r,L.exports.TinyEmitter=r,L.exports}var j=k(),Q=H(j),z,F;function G(){if(F)return z;F=1,z=function(e,s,i){i||(typeof s=="function"?(i=s,s=null):i=r);var n=e&&e.length;if(!n)return i(null,[]);var o=!1,l=new Array(n);e.forEach(s?function(a,c){a.call(s,u(c))}:function(a,c){a(u(c))});function u(a){return function(c,m){if(!o){if(c){i(c,l),o=!0;return}l[a]=m,--n||i(null,l)}}}};function r(){}return z}var K=G(),J=H(K);function f(r){return parseFloat(r)||0}class C{constructor(t,e){this.x=f(t),this.y=f(e)}static equals(t,e){return t.x===e.x&&t.y===e.y}}class T{constructor(t,e,s,i,n){this.id=n,this.left=t,this.top=e,this.width=s,this.height=i}static intersects(t,e){return t.left<e.left+e.width&&e.left<t.left+t.width&&t.top<e.top+e.height&&e.top<t.top+t.height}}var p={BASE:"shuffle",SHUFFLE_ITEM:"shuffle-item",VISIBLE:"shuffle-item--visible",HIDDEN:"shuffle-item--hidden"};let x=0;class d{constructor(t,e){x+=1,this.id=x,this.element=t,this.isRTL=e,this.isVisible=!0,this.isHidden=!1}show(){this.isVisible=!0,this.element.classList.remove(p.HIDDEN),this.element.classList.add(p.VISIBLE),this.element.removeAttribute("aria-hidden")}hide(){this.isVisible=!1,this.element.classList.remove(p.VISIBLE),this.element.classList.add(p.HIDDEN),this.element.setAttribute("aria-hidden",!0)}init(){this.addClasses([p.SHUFFLE_ITEM,p.VISIBLE]),this.applyCss(d.Css.INITIAL),this.applyCss(this.isRTL?d.Css.DIRECTION.rtl:d.Css.DIRECTION.ltr),this.scale=d.Scale.VISIBLE,this.point=new C}addClasses(t){t.forEach(e=>{this.element.classList.add(e)})}removeClasses(t){t.forEach(e=>{this.element.classList.remove(e)})}applyCss(t){Object.keys(t).forEach(e=>{this.element.style[e]=t[e]})}dispose(){this.removeClasses([p.HIDDEN,p.VISIBLE,p.SHUFFLE_ITEM]),this.element.removeAttribute("style"),this.element=null}}d.Css={INITIAL:{position:"absolute",top:0,visibility:"visible",willChange:"transform"},DIRECTION:{ltr:{left:0},rtl:{right:0}},VISIBLE:{before:{opacity:1,visibility:"visible"},after:{transitionDelay:""}},HIDDEN:{before:{opacity:0},after:{visibility:"hidden",transitionDelay:""}}};d.Scale={VISIBLE:1,HIDDEN:.001};let w=null;var N=()=>{if(w!==null)return w;const r=document.body||document.documentElement,t=document.createElement("div");t.style.cssText="width:10px;padding:2px;box-sizing:border-box;",r.appendChild(t);const{width:e}=window.getComputedStyle(t,null);return w=Math.round(f(e))===10,r.removeChild(t),w};function y(r,t,e=window.getComputedStyle(r,null)){let s=f(e[t]);return!N()&&t==="width"?s+=f(e.paddingLeft)+f(e.paddingRight)+f(e.borderLeftWidth)+f(e.borderRightWidth):!N()&&t==="height"&&(s+=f(e.paddingTop)+f(e.paddingBottom)+f(e.borderTopWidth)+f(e.borderBottomWidth)),s}function Z(r){let t=r.length;for(;t;){t-=1;const e=Math.floor(Math.random()*(t+1)),s=r[e];r[e]=r[t],r[t]=s}return r}const X={reverse:!1,by:null,compare:null,randomize:!1,key:"element"};function S(r,t){const e={...X,...t},s=Array.from(r);let i=!1;return r.length?e.randomize?Z(r):(typeof e.by=="function"?r.sort((n,o)=>{if(i)return 0;const l=e.by(n[e.key]),u=e.by(o[e.key]);return l===void 0&&u===void 0?(i=!0,0):l<u||l==="sortFirst"||u==="sortLast"?-1:l>u||l==="sortLast"||u==="sortFirst"?1:0}):typeof e.compare=="function"&&r.sort(e.compare),i?s:(e.reverse&&r.reverse(),r)):[]}const v={},A="transitionend";let O=0;function tt(){return O+=1,A+O}function B(r){return v[r]?(v[r].element.removeEventListener(A,v[r].listener),v[r]=null,!0):!1}function et(r,t){const e=tt(),s=i=>{i.currentTarget===i.target&&(B(e),t(i))};return r.addEventListener(A,s),v[e]={element:r,listener:s},e}function q(r){return Math.max(...r)}function st(r){return Math.min(...r)}function V(r,t,e,s){let i=r/t;return Math.abs(Math.round(i)-i)<s&&(i=Math.round(i)),Math.min(Math.ceil(i),e)}function W(r,t,e){if(t===1)return r;const s=[];for(let i=0;i<=e-t;i++)s.push(q(r.slice(i,i+t)));return s}function $(r,t){const e=st(r);for(let s=0,i=r.length;s<i;s++)if(r[s]>=e-t&&r[s]<=e+t)return s;return 0}function it({itemSize:r,positions:t,gridSize:e,total:s,threshold:i,buffer:n}){const o=V(r.width,e,s,i),l=W(t,o,s),u=$(l,n),a=new C(e*u,l[u]),c=l[u]+r.height;for(let m=0;m<o;m++)t[u+m]=c;return a}function U(r,t){const e={};r.forEach(o=>{e[o.top]?e[o.top].push(o):e[o.top]=[o]});let s=[];const i=[],n=[];return Object.keys(e).forEach(o=>{const l=e[o];i.push(l);const u=l[l.length-1],a=u.left+u.width,c=Math.round((t-a)/2);let m=l,D=!1;if(c>0){const E=[];D=l.every(I=>{const g=new T(I.left+c,I.top,I.width,I.height,I.id),_=!s.some(b=>T.intersects(g,b));return E.push(g),_}),D&&(m=E)}if(!D){let E;if(l.some(g=>s.some(_=>{const b=T.intersects(g,_);return b&&(E=_),b}))){const g=n.findIndex(_=>_.includes(E));n.splice(g,1,i[g])}}s=s.concat(m),n.push(m)}),n.flat().sort((o,l)=>o.id-l.id).map(o=>new C(o.left,o.top))}function nt(r){return r.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function R(r){return Array.from(new Set(r))}let P=0;class h extends Q{constructor(t,e={}){super(),this.options={...h.options,...e},this.lastSort={},this.group=h.ALL_ITEMS,this.lastFilter=h.ALL_ITEMS,this.isEnabled=!0,this.isDestroyed=!1,this.isInitialized=!1,this._transitions=[],this.isTransitioning=!1,this._queue=[];const s=this._getElementOption(t);if(!s)throw new TypeError("Shuffle needs to be initialized with an element.");this.element=s,this.id=`shuffle_${P}`,P+=1,this._init(),this.isInitialized=!0}_init(){if(this.items=this._getItems(),this.sortedItems=this.items,this.options.sizer=this._getElementOption(this.options.sizer),this.element.classList.add(h.Classes.BASE),this._initItems(this.items),document.readyState!=="complete"){const s=this.layout.bind(this);window.addEventListener("load",function i(){window.removeEventListener("load",i),s()})}const t=window.getComputedStyle(this.element,null),e=h.getSize(this.element).width;this._validateStyles(t),this._setColumns(e),this.filter(this.options.group,this.options.initialSort),this._rafId=null,"ResizeObserver"in window&&(this._resizeObserver=new ResizeObserver(this._handleResizeCallback.bind(this)),this._resizeObserver.observe(this.element)),this.element.offsetWidth,this.setItemTransitions(this.items),this.element.style.transition=`height ${this.options.speed}ms ${this.options.easing}`}_getElementOption(t){return typeof t=="string"?this.element.querySelector(t):t&&t.nodeType&&t.nodeType===1?t:t&&t.jquery?t[0]:null}_validateStyles(t){t.position==="static"&&(this.element.style.position="relative"),t.overflow!=="hidden"&&(this.element.style.overflow="hidden")}_filter(t=this.lastFilter,e=this.items){const s=this._getFilteredSets(t,e);return this._toggleFilterClasses(s),this.lastFilter=t,typeof t=="string"&&(this.group=t),s}_getFilteredSets(t,e){let s=[];const i=[];return t===h.ALL_ITEMS?s=e:e.forEach(n=>{this._doesPassFilter(t,n.element)?s.push(n):i.push(n)}),{visible:s,hidden:i}}_doesPassFilter(t,e){if(typeof t=="function")return t.call(e,e,this);const s=e.dataset[h.FILTER_ATTRIBUTE_KEY],i=this.options.delimiter?s.split(this.options.delimiter):JSON.parse(s);function n(o){return i.includes(o)}return Array.isArray(t)?this.options.filterMode===h.FilterMode.ANY?t.some(n):t.every(n):i.includes(t)}_toggleFilterClasses({visible:t,hidden:e}){t.forEach(s=>{s.show()}),e.forEach(s=>{s.hide()})}_initItems(t){t.forEach(e=>{e.init()})}_disposeItems(t){t.forEach(e=>{e.dispose()})}_updateItemCount(){this.visibleItems=this._getFilteredItems().length}setItemTransitions(t){const{speed:e,easing:s}=this.options,i=this.options.useTransforms?["transform"]:["top","left"],n=Object.keys(d.Css.HIDDEN.before).map(l=>nt(l)),o=i.concat(n).join();t.forEach(l=>{l.element.style.transitionDuration=`${e}ms`,l.element.style.transitionTimingFunction=s,l.element.style.transitionProperty=o})}_getItems(){return Array.from(this.element.children).filter(t=>t.matches(this.options.itemSelector)).map(t=>new d(t,this.options.isRTL))}_mergeNewItems(t){const e=Array.from(this.element.children);return S(this.items.concat(t),{by(s){return e.indexOf(s)}})}_getFilteredItems(){return this.items.filter(t=>t.isVisible)}_getConcealedItems(){return this.items.filter(t=>!t.isVisible)}_getColumnSize(t,e){let s;return typeof this.options.columnWidth=="function"?s=this.options.columnWidth(t):this.options.sizer?s=h.getSize(this.options.sizer).width:this.options.columnWidth?s=this.options.columnWidth:this.items.length>0?s=h.getSize(this.items[0].element,!0).width:s=t,s===0&&(s=t),s+e}_getGutterSize(t){let e;return typeof this.options.gutterWidth=="function"?e=this.options.gutterWidth(t):this.options.sizer?e=y(this.options.sizer,"marginLeft"):e=this.options.gutterWidth,e}_setColumns(t=h.getSize(this.element).width){const e=this._getGutterSize(t),s=this._getColumnSize(t,e);let i=(t+e)/s;Math.abs(Math.round(i)-i)<this.options.columnThreshold&&(i=Math.round(i)),this.cols=Math.max(Math.floor(i||0),1),this.containerWidth=t,this.colWidth=s}_setContainerSize(){this.element.style.height=`${this._getContainerSize()}px`}_getContainerSize(){return q(this.positions)}_getStaggerAmount(t){return Math.min(t*this.options.staggerAmount,this.options.staggerAmountMax)}_dispatch(t,e={}){this.isDestroyed||(e.shuffle=this,this.emit(t,e))}_resetCols(){let t=this.cols;for(this.positions=[];t;)t-=1,this.positions.push(0)}_layout(t){const e=this._getNextPositions(t);let s=0;t.forEach((i,n)=>{function o(){i.applyCss(d.Css.VISIBLE.after)}if(C.equals(i.point,e[n])&&!i.isHidden){i.applyCss(d.Css.VISIBLE.before),o();return}i.point=e[n],i.scale=d.Scale.VISIBLE,i.isHidden=!1;const l=this.getStylesForTransition(i,d.Css.VISIBLE.before);l.transitionDelay=`${this._getStaggerAmount(s)}ms`,this._queue.push({item:i,styles:l,callback:o}),s+=1})}_getNextPositions(t){if(this.options.isCentered){const e=t.map((s,i)=>{const n=h.getSize(s.element,!0),o=this._getItemPosition(n);return new T(o.x,o.y,n.width,n.height,i)});return this.getTransformedPositions(e,this.containerWidth)}return t.map(e=>this._getItemPosition(h.getSize(e.element,!0)))}_getItemPosition(t){return it({itemSize:t,positions:this.positions,gridSize:this.colWidth,total:this.cols,threshold:this.options.columnThreshold,buffer:this.options.buffer})}getTransformedPositions(t,e){return U(t,e)}_shrink(t=this._getConcealedItems()){let e=0;t.forEach(s=>{function i(){s.applyCss(d.Css.HIDDEN.after)}if(s.isHidden){s.applyCss(d.Css.HIDDEN.before),i();return}s.scale=d.Scale.HIDDEN,s.isHidden=!0;const n=this.getStylesForTransition(s,d.Css.HIDDEN.before);n.transitionDelay=`${this._getStaggerAmount(e)}ms`,this._queue.push({item:s,styles:n,callback:i}),e+=1})}_handleResizeCallback(t){if(!(!this.isEnabled||this.isDestroyed))for(const e of t)Math.round(e.contentRect.width)!==Math.round(this.containerWidth)&&(cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(this.update.bind(this)))}getStylesForTransition(t,e){const s={...e};if(this.options.useTransforms){const i=this.options.isRTL?"-":"",n=this.options.roundTransforms?Math.round(t.point.x):t.point.x,o=this.options.roundTransforms?Math.round(t.point.y):t.point.y;s.transform=`translate(${i}${n}px, ${o}px) scale(${t.scale})`}else this.options.isRTL?s.right=`${t.point.x}px`:s.left=`${t.point.x}px`,s.top=`${t.point.y}px`;return s}_whenTransitionDone(t,e,s){const i=et(t,n=>{e(),s(null,n)});this._transitions.push(i)}_getTransitionFunction(t){return e=>{t.item.applyCss(t.styles),this._whenTransitionDone(t.item.element,t.callback,e)}}_processQueue(){this.isTransitioning&&this._cancelMovement();const t=this.options.speed>0,e=this._queue.length>0;e&&t&&this.isInitialized?this._startTransitions(this._queue):e?(this._styleImmediately(this._queue),this._dispatch(h.EventType.LAYOUT)):this._dispatch(h.EventType.LAYOUT),this._queue.length=0}_startTransitions(t){this.isTransitioning=!0;const e=t.map(s=>this._getTransitionFunction(s));J(e,this._movementFinished.bind(this))}_cancelMovement(){this._transitions.forEach(B),this._transitions.length=0,this.isTransitioning=!1}_styleImmediately(t){if(t.length){const e=t.map(s=>s.item.element);h._skipTransitions(e,()=>{t.forEach(s=>{s.item.applyCss(s.styles),s.callback()})})}}_movementFinished(){this._transitions.length=0,this.isTransitioning=!1,this._dispatch(h.EventType.LAYOUT)}filter(t,e){this.isEnabled&&((!t||t&&t.length===0)&&(t=h.ALL_ITEMS),this._filter(t),this._shrink(),this._updateItemCount(),this.sort(e))}sort(t=this.lastSort){if(!this.isEnabled)return;this._resetCols();const e=S(this._getFilteredItems(),t);this.sortedItems=e,this._layout(e),this._processQueue(),this._setContainerSize(),this.lastSort=t}update({recalculateSizes:t=!0,force:e=!1}={}){(this.isEnabled||e)&&(t&&this._setColumns(),this.sort())}layout(){this.update({recalculateSizes:!0})}add(t){const e=R(t).map(a=>new d(a,this.options.isRTL));this._initItems(e),this._resetCols();const s=this._mergeNewItems(e),i=S(s,this.lastSort),n=this._filter(this.lastFilter,i),o=a=>e.includes(a),l=a=>{a.scale=d.Scale.HIDDEN,a.isHidden=!0,a.applyCss(d.Css.HIDDEN.before),a.applyCss(d.Css.HIDDEN.after)},u=this._getNextPositions(n.visible);n.visible.forEach((a,c)=>{o(a)&&(a.point=u[c],l(a),a.applyCss(this.getStylesForTransition(a,{})))}),n.hidden.forEach(a=>{o(a)&&l(a)}),this.element.offsetWidth,this.setItemTransitions(e),this.items=this._mergeNewItems(e),this.filter(this.lastFilter)}disable(){this.isEnabled=!1}enable(t=!0){this.isEnabled=!0,t&&this.update()}remove(t){if(!t.length)return;const e=R(t),s=e.map(n=>this.getItemByElement(n)).filter(n=>!!n),i=()=>{this._disposeItems(s),e.forEach(n=>{n.parentNode.removeChild(n)}),this._dispatch(h.EventType.REMOVED,{collection:e})};this._toggleFilterClasses({visible:[],hidden:s}),this._shrink(s),this.sort(),this.items=this.items.filter(n=>!s.includes(n)),this._updateItemCount(),this.once(h.EventType.LAYOUT,i)}getItemByElement(t){return this.items.find(e=>e.element===t)}resetItems(){this._disposeItems(this.items),this.isInitialized=!1,this.items=this._getItems(),this._initItems(this.items),this.once(h.EventType.LAYOUT,()=>{this.setItemTransitions(this.items),this.isInitialized=!0}),this.filter(this.lastFilter)}destroy(){this._cancelMovement(),this._resizeObserver&&(this._resizeObserver.unobserve(this.element),this._resizeObserver=null),this.element.classList.remove("shuffle"),this.element.removeAttribute("style"),this._disposeItems(this.items),this.items.length=0,this.sortedItems.length=0,this._transitions.length=0,this.options.sizer=null,this.element=null,this.isDestroyed=!0,this.isEnabled=!1}static getSize(t,e=!1){const s=window.getComputedStyle(t,null);let i=y(t,"width",s),n=y(t,"height",s);if(e){const o=y(t,"marginLeft",s),l=y(t,"marginRight",s),u=y(t,"marginTop",s),a=y(t,"marginBottom",s);i+=o+l,n+=u+a}return{width:i,height:n}}static _skipTransitions(t,e){const i=t.map(n=>{const{style:o}=n,l=o.transitionDuration,u=o.transitionDelay;return o.transitionDuration="0ms",o.transitionDelay="0ms",{duration:l,delay:u}});e(),t[0].offsetWidth,t.forEach((n,o)=>{n.style.transitionDuration=i[o].duration,n.style.transitionDelay=i[o].delay})}}h.ShuffleItem=d;h.ALL_ITEMS="all";h.FILTER_ATTRIBUTE_KEY="groups";h.EventType={LAYOUT:"shuffle:layout",REMOVED:"shuffle:removed"};h.Classes=p;h.FilterMode={ANY:"any",ALL:"all"};h.options={group:h.ALL_ITEMS,speed:250,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)",itemSelector:"*",sizer:null,gutterWidth:0,columnWidth:0,delimiter:null,buffer:0,columnThreshold:.01,initialSort:null,staggerAmount:15,staggerAmountMax:150,useTransforms:!0,filterMode:h.FilterMode.ANY,isCentered:!1,isRTL:!1,roundTransforms:!0};h.Point=C;h.Rect=T;h.__sorter=S;h.__getColumnSpan=V;h.__getAvailablePositions=W;h.__getShortColumn=$;h.__getCenteredPositions=U;const Y=document.getElementById("photo-gallery"),rt=Y.querySelector(".js-shuffle-sizer");new h(Y,{itemSelector:".picture-item",sizer:rt,columnWidth:1});
